# 1. 浏览器的多进程架构#
## 1.1浏览器的架构 ##
浏览器：①单进程多线程的应用 vs ② 使用IPC通信的多进程应用
### 以chrome为例：多进程架构 ###
    `浏览器进程：地址栏、书签栏、前进后退按钮，网络请求/文件访问
	 渲染进程：网页呈现
	 插件进程：网页上面的所有插件
	 GPU进程`

    `优点：某一进程出问题，不会影响其他进程
	 缺点：不同进程之间是不共享内存的，所以某些进程中包含了相同的内容`
## 1.2 导航过程发生了什么 ##
    `浏览器进程：①UI线程：控制浏览器上的按钮以及输入框`
				②网络线程：处理网络请求，从网上获取数据
				③存储线程：控制文件等访问

#### 1、处理输入 ：UI线程需要判断用户输入的是URL还是query ####
#### 2.开始导航：用户点击回车键，UI 线程通知 网络线程获取页面内容，并控制tab上的spinner展现，表示正在加载中，网络线程会执行DNS查询，随后请求建立TLS链接 ####
#### 如果网络线程接收到了重定向请求头，则网络线程又通知UI线程去，去触发另外一个URL ####
#### 3.读取响应：响应返回后，网络线程会依据content-type和MIME type sniffing判断响应内容的格式，如果是HTML就给渲染线程，如果是zip或者其他文件，则给下载管理器，同时会触发安全浏览检查 ####
#### 4.查找渲染进程 安全检查完成，类型检查完成后，网络线程确定浏览器可以导航到请求网页，网络线程会通知ui线程数据已经准备好，ui线程找渲染线程去进行页面的渲染 ####
#### 5.确认导航浏览器进程收到渲染进程的确认消息后，导航过程结束，页面加载过程开始 ####
#### 6.额外的步骤 ####
#### 所有的js代码都是由渲染进程控制的 ####

## 1.3渲染进程是如何工作的 ##
### 核心：转换html/css/js 为用户可以交互的web页面 ###
    `主线程、工作线程、排版线程、光栅线程`
### 1.构建DOM: 渲染进程接收到导航的确认消息，开始接受html数据时，主线程会解析文本字符串为DOM ###
### 2.加载次级资源 ：外部css，图片，js由主进程逐一请求，是把这些请求交给浏览器进程去下载，相当于同时进行###
### 3.js的下载与执行：遇到script标签，渲染进程会停止解析html，而且加载解析js代码，因为js可能改变dom结构，所以才停下来的，在script中的async和defer则不会组织渲染进程 ###
### 4.样式计算：主线程基于css选择器，计算每一个节点的样式，如果没有指定，都有一个默认样式 ###
### 5.获取布局：每个节点的具体位置，布局树和DOM树的区别就在于：display：none ,在dom树上有，在布局树上没有 ###
### 6.绘制各元素：主线程遍历布局树来创建绘制记录：也就是先绘制谁 ###
### 7.合成帧：合成器线程将栅格化每一层，栅格线程会栅格化每一个磁铁并存储在GPU显存中 ###
## 1.4浏览器对事件的处理 ：浏览器进程只会感知在哪里发生了事件行为，对内容处理的还是渲染进程，渲染进程负责找到事件对象，并执行相关事件处理函数##
### web开发中常用的事件处理模式是事件委托，基于事件冒泡，也就是在最顶层绑定事件 ###